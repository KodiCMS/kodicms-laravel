function strtr(e,t,n){if("object"==typeof t){for(var i="",o=0;o<e.length;o++)i+="0";var a=0,s=-1,r="";for(fr in t)for(a=0;-1!=(s=e.indexOf(fr,a));)if(0==parseInt(i.substr(s,fr.length))){for(var l=0;l<t[fr].length;l++)r+="1";i=i.substr(0,s)+r+i.substr(s+fr.length,i.length-(s+fr.length)),e=e.substr(0,s)+t[fr]+e.substr(s+fr.length,e.length-(s+fr.length)),a=s+t[fr].length+1,r=""}else a=s+1;return e}for(var c=0;c<t.length;c++)e=e.replace(new RegExp(t.charAt(c),"g"),n.charAt(c));return e}function __(e,t){if(void 0!==CMS.translations[e])var e=CMS.translations[e];return void 0==t?e:strtr(e,t)}function readImage(e,t){if(e.files&&e.files[0]&&t){var n=new FileReader;n.onload=function(e){var n=new Image;n.src=e.target.result;var i=n.width/n.height,o=document.createElement("canvas");o.width=100*i,o.height=100;var a=o.getContext("2d");a.drawImage(n,0,0,o.width,o.height),t.attr("src",o.toDataURL("image/jpeg",1))},n.readAsDataURL(e.files[0])}}(function(){String.prototype.endsWith||(String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n,i,o;if(void 0===this||null===this)throw new TypeError('"this" is null or not defined');for(i=this.length>>>0,t=+t||0,Math.abs(t)===1/0&&(t=0),0>t&&(t+=i,0>t&&(t=0)),n=o=t;i>=t?i>o:o>i;n=i>=t?++o:--o)if(this[n]===e)return n;return-1}),Function.prototype.bind||(Function.prototype.bind=function(e){var t,n,i,o;if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");return t=Array.prototype.slice.call(arguments,1),o=this,i=function(){},n=function(){return o.apply(this instanceof i&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))},i.prototype=this.prototype,n.prototype=new i,n}),Object.keys||(Object.keys=function(){"use strict";var e,t,n;return n=Object.prototype.hasOwnProperty,t={toString:null}.propertyIsEnumerable("toString")?!1:!0,e=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],function(i){var o,a,s,r,l,c,d;if("object"!=typeof i&&("function"!=typeof i||null===i))throw new TypeError("Object.keys called on non-object");for(s=[],r=0,c=i.length;c>r;r++)a=i[r],n.call(i,a)&&s.push(a);if(t)for(l=0,d=e.length;d>l;l++)o=e[l],n.call(i,o)&&s.push(o);return s}}.call(this)),window.getScreenSize=function(e,t){return e.is(":visible")?"small":t.is(":visible")?"tablet":"desktop"},window.elHasClass=function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>-1},window.elRemoveClass=function(e,t){return e.className=(" "+e.className+" ").replace(" "+t+" "," ").trim()}}).call(this),function(){var e,t;t={is_mobile:!1,resize_delay:400,stored_values_prefix:"cms_",consts:{COLORS:["#71c73e","#77b7c5","#d54848","#6c42e5","#e8e64e","#dd56e6","#ecad3f","#618b9d","#b68b68","#36a766","#3156be","#00b3ff","#646464","#a946e8","#9d9d9d"]}},e=function(){return this.init=[],this.plugins={},this.settings={},this.localStorageSupported="undefined"!=typeof window.Storage?!0:!1,this},e.prototype.start=function(e,n){return null==e&&(e=[]),null==n&&(n={}),function(i){var o,a,s,r;for($("html").addClass("pxajs"),e.length>0&&$.merge(i.init,e),i.settings=$.extend(!0,{},t,n||{}),i.settings.is_mobile=/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase()),i.settings.is_mobile&&FastClick&&FastClick.attach(document.body),r=i.init,a=0,s=r.length;s>a;a++)o=r[a],$.proxy(o,i)();return $(window).trigger("pa.loaded"),$(window).resize()}(this),this},e.prototype.addInitializer=function(e){return this.init.push(e)},e.prototype.initPlugin=function(e,t,n){return null!=n&&(this.settings=$.extend(!0,{},this.settings,n||{})),this.plugins[e]=t,t.init?t.init():void 0},e.prototype.storeValue=function(e,t,n){var i;if(null==n&&(n=!1),this.localStorageSupported&&!n)try{return void window.localStorage.setItem(this.settings.stored_values_prefix+e,t)}catch(o){i=o}return document.cookie=this.settings.stored_values_prefix+e+"="+escape(t)},e.prototype.getStoredValue=function(e,t,n){var i,o,a,s,r,l,c,d,u;if(null==t&&(t=!1),null==n&&(n=null),this.localStorageSupported&&!t)try{return l=window.localStorage.getItem(this.settings.stored_values_prefix+e),l?l:n}catch(p){a=p}for(o=document.cookie.split(";"),d=0,u=o.length;u>d;d++)if(i=o[d],r=i.indexOf("="),s=i.substr(0,r).replace(/^\s+|\s+$/g,""),c=i.substr(r+1).replace(/^\s+|\s+$/g,""),s===this.settings.stored_values_prefix+e)return c;return n},e.Constructor=e,window.KodiCMS=new e}.call(this),function(){var e;e=function(e){var t;return t=null,function(){return t&&clearTimeout(t),t=setTimeout(function(){return t=null,e.call(this)},KodiCMS.settings.resize_delay)}},KodiCMS.addInitializer(function(){var t,n,i,o;return o=null,i=$(window),t=$('<div id="small-screen-width-point" style="position:absolute;top:-10000px;width:10px;height:10px;background:#fff;"></div>'),n=$('<div id="tablet-screen-width-point" style="position:absolute;top:-10000px;width:10px;height:10px;background:#fff;"></div>'),$("body").append(t).append(n),i.on("resize",e(function(){return i.trigger("pa.resize"),t.is(":visible")?("small"!==o&&i.trigger("pa.screen.small"),o="small"):n.is(":visible")?("tablet"!==o&&i.trigger("pa.screen.tablet"),o="tablet"):("desktop"!==o&&i.trigger("pa.screen.desktop"),o="desktop")}))})}.call(this),function(){KodiCMS.MainNavbar=function(){return this._scroller=!1,this._wheight=null,this.scroll_pos=0,this},KodiCMS.MainNavbar.prototype.init=function(){var e;return this.$navbar=$("#main-navbar"),this.$header=this.$navbar.find(".navbar-header"),this.$toggle=this.$navbar.find(".navbar-toggle:first"),this.$collapse=$("#main-navbar-collapse"),this.$collapse_div=this.$collapse.find("> div"),e=!1,$(window).on("pa.screen.small pa.screen.tablet",function(t){return function(){return"fixed"===t.$navbar.css("position")&&t._setupScroller(),e=!0}}(this)).on("pa.screen.desktop",function(t){return function(){return t._removeScroller(),e=!1}}(this)),this.$navbar.on("click",".nav-icon-btn.dropdown > .dropdown-toggle",function(t){return e?(t.preventDefault(),t.stopPropagation(),document.location.href=$(this).attr("href"),!1):void 0})},KodiCMS.MainNavbar.prototype._setupScroller=function(){return this._scroller?void 0:(this._scroller=!0,this.$collapse_div.pixelSlimScroll({}),this.$navbar.on("shown.bs.collapse.mn_collapse",$.proxy(function(e){return function(){return e._updateCollapseHeight(),e._watchWindowHeight()}}(this),this)).on("hidden.bs.collapse.mn_collapse",$.proxy(function(e){return function(){return e._wheight=null,e.$collapse_div.pixelSlimScroll({scrollTo:"0px"})}}(this),this)).on("shown.bs.dropdown.mn_collapse",$.proxy(this._updateCollapseHeight,this)).on("hidden.bs.dropdown.mn_collapse",$.proxy(this._updateCollapseHeight,this)),this._updateCollapseHeight())},KodiCMS.MainNavbar.prototype._removeScroller=function(){return this._scroller?(this._wheight=null,this._scroller=!1,this.$collapse_div.pixelSlimScroll({destroy:"destroy"}),this.$navbar.off("shown.bs.collapse.mn_collapse"),this.$navbar.off("hidden.bs.collapse.mn_collapse"),this.$navbar.off("shown.bs.dropdown.mn_collapse"),this.$navbar.off("hidden.bs.dropdown.mn_collapse"),this.$collapse.attr("style","")):void 0},KodiCMS.MainNavbar.prototype._updateCollapseHeight=function(){var e,t,n;if(this._scroller)return n=$(window).innerHeight(),e=this.$header.outerHeight(),t=this.$collapse_div.scrollTop(),this.$collapse_div.css(e+this.$collapse_div.css({"max-height":"none"}).outerHeight()>n?{"max-height":n-e}:{"max-height":"none"}),this.$collapse_div.pixelSlimScroll({scrollTo:t+"px"})},KodiCMS.MainNavbar.prototype._watchWindowHeight=function(){var e;return this._wheight=$(window).innerHeight(),e=function(t){return function(){return null!==t._wheight?(t._wheight!==$(window).innerHeight()&&t._updateCollapseHeight(),t._wheight=$(window).innerHeight(),setTimeout(e,100)):void 0}}(this),window.setTimeout(e,100)},KodiCMS.MainNavbar.Constructor=KodiCMS.MainNavbar,KodiCMS.addInitializer(function(){return KodiCMS.initPlugin("main_navbar",new KodiCMS.MainNavbar)})}.call(this),function(){KodiCMS.MainMenu=function(){return this._screen=null,this._last_screen=null,this._animate=!1,this._close_timer=null,this._dropdown_li=null,this._dropdown=null,this},KodiCMS.MainMenu.prototype.init=function(){var e,t;return this.$menu=$("#main-menu"),this.$menu.length?(this.$body=$("body"),this.menu=this.$menu[0],this.$ssw_point=$("#small-screen-width-point"),this.$tsw_point=$("#tablet-screen-width-point"),e=this,KodiCMS.settings.main_menu.store_state&&(t=this._getMenuState(),document.body.className+=" disable-mm-animation",null!==t&&this.$body["collapsed"===t?"addClass":"removeClass"]("mmc"),setTimeout(function(e){return function(){return elRemoveClass(document.body,"disable-mm-animation")}}(this),20)),$(".navigation > li:has(ul)",this.$menu).each(function(){$("> ul > li",this).size()<1&&$(this).remove()}),this.setupAnimation(),$(window).on("resize.pa.mm",$.proxy(this.onResize,this)),this.onResize(),this.$menu.find(".navigation > .mm-dropdown").addClass("mm-dropdown-root"),KodiCMS.settings.main_menu.detect_active&&this.detectActiveItem(),$.support.transition&&this.$menu.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",$.proxy(this._onAnimationEnd,this)),$("#main-menu-toggle").on("click",$.proxy(this.toggle,this)),$("#main-menu-inner").slimScroll({height:"100%"}).on("slimscrolling",function(e){return function(){return e.closeCurrentDropdown(!0)}}(this)),this.$menu.on("click",".mm-dropdown > a",function(){var t;return t=this.parentNode,elHasClass(t,"mm-dropdown-root")&&e._collapsed()?elHasClass(t,"mmc-dropdown-open")?elHasClass(t,"freeze")?e.closeCurrentDropdown(!0):e.freezeDropdown(t):e.openDropdown(t,!0):e.toggleSubmenu(t),!1}),this.$menu.find(".navigation").on("mouseenter.pa.mm-dropdown",".mm-dropdown-root",function(){return e.clearCloseTimer(),e._dropdown_li!==this?!e._collapsed()||e._dropdown_li&&elHasClass(e._dropdown_li,"freeze")?void 0:e.openDropdown(this):void 0}).on("mouseleave.pa.mm-dropdown",".mm-dropdown-root",function(){return e._close_timer=setTimeout(function(){return e.closeCurrentDropdown()},KodiCMS.settings.main_menu.dropdown_close_delay)}),this):void 0},KodiCMS.MainMenu.prototype._collapsed=function(){return"desktop"===this._screen&&elHasClass(document.body,"mmc")||"desktop"!==this._screen&&!elHasClass(document.body,"mme")},KodiCMS.MainMenu.prototype.onResize=function(){return this._screen=getScreenSize(this.$ssw_point,this.$tsw_point),this._animate=-1===KodiCMS.settings.main_menu.disable_animation_on.indexOf(screen),this._dropdown_li&&this.closeCurrentDropdown(!0),("small"===this._screen&&this._last_screen!==this._screen||"tablet"===this._screen&&"small"===this._last_screen)&&(document.body.className+=" disable-mm-animation",setTimeout(function(e){return function(){return elRemoveClass(document.body,"disable-mm-animation")}}(this),20)),this._last_screen=this._screen},KodiCMS.MainMenu.prototype.clearCloseTimer=function(){return this._close_timer?(clearTimeout(this._close_timer),this._close_timer=null):void 0},KodiCMS.MainMenu.prototype._onAnimationEnd=function(e){return"desktop"===this._screen&&"main-menu"===e.target.id?$(window).trigger("resize"):void 0},KodiCMS.MainMenu.prototype.toggle=function(){var e,t;return e="small"===this._screen||"tablet"===this._screen?"mme":"mmc",elHasClass(document.body,e)?elRemoveClass(document.body,e):document.body.className+=" "+e,"mmc"!==e?(t=document.getElementById(""),$("#main-navbar-collapse").stop().removeClass("in collapsing").addClass("collapse")[0].style.height="0px",$("#main-navbar .navbar-toggle").addClass("collapsed")):(KodiCMS.settings.main_menu.store_state&&this._storeMenuState(elHasClass(document.body,"mmc")),$.support.transition?void 0:$(window).trigger("resize"))},KodiCMS.MainMenu.prototype.toggleSubmenu=function(e){return this[elHasClass(e,"open")?"collapseSubmenu":"expandSubmenu"](e),!1},KodiCMS.MainMenu.prototype.collapseSubmenu=function(e){var t,n;return t=$(e),n=t.find("> ul"),this._animate?n.animate({height:0},KodiCMS.settings.main_menu.animation_speed,function(i){return function(){return elRemoveClass(e,"open"),n.attr("style",""),t.find(".mm-dropdown.open").removeClass("open").find("> ul").attr("style","")}}(this)):elRemoveClass(e,"open"),!1},KodiCMS.MainMenu.prototype.expandSubmenu=function(e){var t,n,i,o;return t=$(e),KodiCMS.settings.main_menu.accordion&&this.collapseAllSubmenus(e),this._animate?(n=t.find("> ul"),o=n[0],o.className+=" get-height",i=n.height(),elRemoveClass(o,"get-height"),o.style.display="block",o.style.height="0px",e.className+=" open",n.animate({height:i},KodiCMS.settings.main_menu.animation_speed,function(e){return function(){return n.attr("style","")}}(this))):e.className+=" open"},KodiCMS.MainMenu.prototype.collapseAllSubmenus=function(e){var t;return t=this,$(e).parent().find("> .mm-dropdown.open").each(function(){return t.collapseSubmenu(this)})},KodiCMS.MainMenu.prototype.openDropdown=function(e,t){var n,i,o,a,s,r,l,c,d,u,p;return null==t&&(t=!1),this._dropdown_li&&this.closeCurrentDropdown(t),n=$(e),o=n.find("> ul"),d=o[0],this._dropdown_li=e,this._dropdown=d,i=o.find("> .mmc-title"),i.length||(i=$('<div class="mmc-title"></div>').text(n.find("> a > .mm-text").text()),d.insertBefore(i[0],d.firstChild)),e.className+=" mmc-dropdown-open",d.className+=" mmc-dropdown-open-ul",c=n.position().top,elHasClass(document.body,"main-menu-fixed")?(a=o.find(".mmc-wrapper"),a.length||(p=document.createElement("div"),p.className="mmc-wrapper",p.style.overflow="hidden",p.style.position="relative",a=$(p),a.append(o.find("> li")),d.appendChild(p)),u=$(window).innerHeight(),l=i.outerHeight(),r=l+3*o.find(".mmc-wrapper > li").first().outerHeight(),c+r>u?(s=c-$("#main-navbar").outerHeight(),d.className+=" top",d.style.bottom=u-c-l+"px"):(s=u-c-l,d.style.top=c+"px"),elHasClass(d,"top")?d.appendChild(i[0]):d.insertBefore(i[0],d.firstChild),e.className+=" slimscroll-attached",a[0].style.maxHeight=s-10+"px",a.pixelSlimScroll({})):d.style.top=c+"px",t&&this.freezeDropdown(e),t||o.on("mouseenter",function(e){return function(){return e.clearCloseTimer()}}(this)).on("mouseleave",function(e){return function(){return e._close_timer=setTimeout(function(){return e.closeCurrentDropdown()},KodiCMS.settings.main_menu.dropdown_close_delay)}}(this)),this.menu.appendChild(d)},KodiCMS.MainMenu.prototype.closeCurrentDropdown=function(e){var t,n;return null==e&&(e=!1),!this._dropdown_li||elHasClass(this._dropdown_li,"freeze")&&!e?void 0:(this.clearCloseTimer(),t=$(this._dropdown),elHasClass(this._dropdown_li,"slimscroll-attached")&&(elRemoveClass(this._dropdown_li,"slimscroll-attached"),n=t.find(".mmc-wrapper"),n.pixelSlimScroll({destroy:"destroy"}).find("> *").appendTo(t),n.remove()),this._dropdown_li.appendChild(this._dropdown),elRemoveClass(this._dropdown,"mmc-dropdown-open-ul"),elRemoveClass(this._dropdown,"top"),elRemoveClass(this._dropdown_li,"mmc-dropdown-open"),elRemoveClass(this._dropdown_li,"freeze"),$(this._dropdown_li).attr("style",""),t.attr("style","").off("mouseenter").off("mouseleave"),this._dropdown=null,this._dropdown_li=null)},KodiCMS.MainMenu.prototype.freezeDropdown=function(e){return e.className+=" freeze"},KodiCMS.MainMenu.prototype.setupAnimation=function(){var e,t,n,i;return n=document.body,i=KodiCMS.settings.main_menu.disable_animation_on,n.className+=" dont-animate-mm-content",e=$("#main-menu"),t=e.find(".navigation"),t.find("> .mm-dropdown > ul").addClass("mmc-dropdown-delay animated"),t.find("> li > a > .mm-text").addClass("mmc-dropdown-delay animated fadeIn"),e.find(".menu-content").addClass("animated fadeIn"),t.find("> .mm-dropdown > ul").addClass(elHasClass(n,"main-menu-right")||elHasClass(n,"right-to-left")&&!elHasClass(n,"main-menu-right")?"fadeInRight":"fadeInLeft"),n.className+=-1===i.indexOf("small")?" animate-mm-sm":" dont-animate-mm-content-sm",n.className+=-1===i.indexOf("tablet")?" animate-mm-md":" dont-animate-mm-content-md",n.className+=-1===i.indexOf("desktop")?" animate-mm-lg":" dont-animate-mm-content-lg",window.setTimeout(function(){return elRemoveClass(n,"dont-animate-mm-content")},500)},KodiCMS.MainMenu.prototype.detectActiveItem=function(){var e,t,n,i,o,a,s,r,l;for(a=(document.location+"").replace(/\#.*?$/,""),o=KodiCMS.settings.main_menu.detect_active_predicate,i=$("#main-menu .navigation"),i.find("li").removeClass("open active"),n=i[0].getElementsByTagName("a"),t=function(e){return function(e){return e.className+=" active",elHasClass(e.parentNode,"navigation")?void 0:(e=e.parentNode.parentNode,e.className+=" open",t(e))}}(this),l=[],s=0,r=n.length;r>s;s++){if(e=n[s],-1===e.href.indexOf("#")&&o(e.href,a)){t(e.parentNode);break}l.push(void 0)}return l},KodiCMS.MainMenu.prototype._getMenuState=function(){return KodiCMS.getStoredValue(KodiCMS.settings.main_menu.store_state_key)},KodiCMS.MainMenu.prototype._storeMenuState=function(e){return KodiCMS.settings.main_menu.store_state?KodiCMS.storeValue(KodiCMS.settings.main_menu.store_state_key,e?"collapsed":"expanded"):void 0},KodiCMS.MainMenu.Constructor=KodiCMS.MainMenu,KodiCMS.addInitializer(function(){return KodiCMS.initPlugin("main_menu",new KodiCMS.MainMenu,{main_menu:{accordion:!0,animation_speed:250,store_state:!0,store_state_key:"mmstate",disable_animation_on:["small"],dropdown_close_delay:300,detect_active:!0,detect_active_predicate:function(e,t){return e==t?!0:BASE_URL==e&&e==t?!0:BASE_URL!=e&&-1!=t.indexOf(e)?!0:!1}}})})}.call(this),function(e){jQuery.fn.extend({pixelSlimScroll:function(n){var i={width:"auto",size:"2px",color:"#000",distance:"1px",start:"top",opacity:.4,railColor:"#333",railOpacity:.2,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"0px",railBorderRadius:"0px"},o=e.extend(i,n);return this.each(function(){function i(t){if(d){var t=t||window.event,n=0;t.wheelDelta&&(n=-t.wheelDelta/120),t.detail&&(n=t.detail/3);var i=t.target||t.srcTarget||t.srcElement;e(i).closest("."+o.wrapperClass).is(y.parent())&&a(n,!0),t.preventDefault&&!w&&t.preventDefault(),w||(t.returnValue=!1)}}function a(e,t,n){w=!1;var i=e,a=y.outerHeight()-x.outerHeight();if(t&&(i=parseInt(x.css("top"))+e*parseInt(o.wheelStep)/100*x.outerHeight(),i=Math.min(Math.max(i,0),a),i=e>0?Math.ceil(i):Math.floor(i),x.css({top:i+"px"})),g=parseInt(x.css("top"))/(y.outerHeight()-x.outerHeight()),i=g*(y[0].scrollHeight-y.outerHeight()),n){i=e;var s=i/y[0].scrollHeight*y.outerHeight();s=Math.min(Math.max(s,0),a),x.css({top:s+"px"})}y.scrollTop(i),y.trigger("slimscrolling",~~i),l(),c()}function s(){window.addEventListener?(this.addEventListener("DOMMouseScroll",i,!1),this.addEventListener("mousewheel",i,!1)):document.attachEvent("onmousewheel",i)}function r(){m=Math.max(y.outerHeight()/y[0].scrollHeight*y.outerHeight(),$),x.css({height:m+"px"});var e=m==y.outerHeight()?"none":"block";x.css({display:e})}function l(){if(r(),clearTimeout(h),g==~~g){if(w=o.allowPageScroll,v!=g){var e=0==~~g?"top":"bottom";y.trigger("slimscroll",e)}}else w=!1;return v=g,m>=y.outerHeight()?void(w=!0):void x.stop(!0,!0).fadeIn("fast")}function c(){}var d,u,p,h,f,m,g,v,b="<div></div>",$=30,w=!1,y=e(this);if(y.parent().hasClass(o.wrapperClass)){var _=y.scrollTop();if(x=y.parent().find("."+o.barClass),S=y.parent().find("."+o.railClass),r(),e.isPlainObject(n)){if("scrollTo"in n)_=parseInt(o.scrollTo);else if("scrollBy"in n)_+=parseInt(o.scrollBy);else if("destroy"in n)return x.remove(),S.remove(),void y.unwrap();a(_,!1,!0)}}else{var C=e(b).addClass(o.wrapperClass).css({position:"relative",overflow:"hidden",width:o.width});y.css({overflow:"hidden",width:o.width});var S=e(b).addClass(o.railClass).css({width:o.size,height:"100%",position:"absolute",top:0,display:"none","border-radius":o.railBorderRadius,background:o.railColor,opacity:o.railOpacity,zIndex:90}),x=e(b).addClass(o.barClass).css({background:o.color,width:o.size,position:"absolute",top:0,opacity:o.opacity,display:"block","border-radius":o.borderRadius,BorderRadius:o.borderRadius,MozBorderRadius:o.borderRadius,WebkitBorderRadius:o.borderRadius,zIndex:99});S.css({right:o.distance}),x.css({right:o.distance}),y.wrap(C),y.parent().append(x),y.parent().append(S),x.bind("mousedown",function(n){var i=e(document);return p=!0,t=parseFloat(x.css("top")),pageY=n.pageY,i.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY,x.css("top",currTop),a(0,x.position().top,!1)}),i.bind("mouseup.slimscroll",function(e){p=!1,c(),i.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(e){return e.stopPropagation(),e.preventDefault(),!1}),S.hover(function(){l()},function(){c()}),x.hover(function(){u=!0},function(){u=!1}),y.hover(function(){d=!0,l(),c()},function(){d=!1,c()}),y.bind("touchstart",function(e,t){e.originalEvent.touches.length&&(f=e.originalEvent.touches[0].pageY)}),y.bind("touchmove",function(e){if(w||e.originalEvent.preventDefault(),e.originalEvent.touches.length){var t=(f-e.originalEvent.touches[0].pageY)/o.touchScrollStep;a(t,!0),f=e.originalEvent.touches[0].pageY}}),r(),s()}}),this}}),jQuery.fn.extend({pixelslimscroll:jQuery.fn.pixelSlimScroll})}(jQuery),!function(e){var t=function(){var t,n=[],i=!1,o=function(e){clearTimeout(t),t=setTimeout(a,100)},a=function(){for(var e=0,t=n.length;t>e;e++)n[e].apply()};return{register:function(t){n.push(t),i===!1&&(e(window).bind("resize",o),i=!0)},unregister:function(e){for(var t=0,i=n.length;i>t;t++)if(n[t]==e){delete n[t];break}}}}(),n=function(n,i){this.element=e(n),this.dropdown=e('<li class="dropdown hide pull-right tabdrop"><a class="dropdown-toggle" data-toggle="dropdown" href="#">'+i.text+' <b class="caret"></b></a><ul class="dropdown-menu"></ul></li>').prependTo(this.element),this.element.parent().is(".tabs-below")&&this.dropdown.addClass("dropup"),t.register(e.proxy(this.layout,this)),this.layout()};n.prototype={constructor:n,layout:function(){var t=[],n=this.element.css("padding-top").replace("px","");this.dropdown.removeClass("hide"),this.element.append(this.dropdown.find("li")).find(">li").not(".tabdrop").each(function(){this.offsetTop>n&&t.push(this)}),t.length>0?(t=e(t),this.dropdown.find("ul").empty().append(t),1==this.dropdown.find(".active").length?this.dropdown.addClass("active"):this.dropdown.removeClass("active")):this.dropdown.addClass("hide")}},e.fn.tabdrop=function(t){return this.each(function(){var i=e(this),o=i.data("tabdrop"),a="object"==typeof t&&t;o||i.data("tabdrop",o=new n(this,e.extend({},e.fn.tabdrop.defaults,a))),"string"==typeof t&&o[t]()})},e.fn.tabdrop.defaults={text:'<i class="icon-align-justify"></i>'},e.fn.tabdrop.Constructor=n}(window.jQuery),function(){$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e}}.call(this),function(){$.fn.scrollTo=function(e,t,n){"function"==typeof t&&2==arguments.length&&(n=t,t=e);var i=$.extend({scrollTarget:e,offsetTop:50,duration:500,easing:"swing"},t);return this.each(function(){var e=$(this),t="number"==typeof i.scrollTarget?i.scrollTarget:$(i.scrollTarget),o="number"==typeof t?t:t.offset().top+e.scrollTop()-parseInt(i.offsetTop);e.animate({scrollTop:o},parseInt(i.duration),i.easing,function(){"function"==typeof n&&n.call(this)})})}}.call(this),function(){var e;if(!$.fn.tabdrop)throw new Error("bootstrap-tabdrop.js required");e=$.fn.tabdrop,$.fn.tabdrop=function(t){return t=$.extend({},$.fn.tabdrop.defaults,t),this.each(function(){var n,i;return n=$(this),e.call(n,t),i=n.data("tabdrop"),i?(i.dropdown.on("click","li",function(){return $(this).parent().parent().find("a.dropdown-toggle").empty().html('<span class="display-tab"> '+$(this).text()+' </span><b class="caret"></b>'),i.layout()}),i.element.on("click","> li",function(){return $(this).hasClass("tabdrop")?void 0:(i.element.find("> .tabdrop > a.dropdown-toggle").empty().html(t.text+' <b class="caret"></b>'),i.layout())})):void 0})},$.fn.tabdrop.defaults={text:'<i class="fa fa-bars"></i>'}}.call(this),function(){$.fn.toggleCheck=function(){return this.each(function(){this.checked=!this.checked})},$.fn.check=function(){return this.each(function(){this.checked=!0})},$.fn.uncheck=function(){return this.each(function(){this.checked=!1})},$.fn.checked=function(){return this.prop("checked")},$.fn.tabs=function(){return $("li a",this).on("click",function(){return $(this).parent().addClass("active").siblings().removeClass("active"),$("div.tab-pane").removeClass("active"),$($(this).attr("href")).addClass("active"),!1})},jQuery.browser={},jQuery.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),jQuery.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),jQuery.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),jQuery.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()),function(e){function t(t){if("string"==typeof t.data&&(t.data={keys:t.data}),t.data&&t.data.keys&&"string"==typeof t.data.keys){var n=t.handler,i=t.data.keys.toLowerCase().split(" "),o=["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"];t.handler=function(t){if(this===t.target||!(/textarea|select/i.test(t.target.nodeName)||e.inArray(t.target.type,o)>-1)){var a=e.hotkeys.specialKeys[t.keyCode],s=String.fromCharCode(t.which).toLowerCase(),r="",l={};e.each(["alt","ctrl","meta","shift"],function(e,n){t[n+"Key"]&&a!==n&&(r+=n+"+")}),r=r.replace("alt+ctrl+meta+shift","hyper"),a&&(l[r+a]=!0),s&&(l[r+s]=!0,l[r+e.hotkeys.shiftNums[s]]=!0,"shift+"===r&&(l[e.hotkeys.shiftNums[s]]=!0));for(var c=0,d=i.length;d>c;c++)if(l[i[c]])return n.apply(this,arguments)}}}}e.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},e.each(["keydown","keyup","keypress"],function(){e.event.special[this]={add:t}})}(this.jQuery),!function(){"use strict";var e=function(e,t){var a,s,r,l,c,d="object"==typeof t&&t.maintainCase||!1,u="object"==typeof t&&t.titleCase?t.titleCase:!1,p="object"==typeof t&&"object"==typeof t.custom&&t.custom?t.custom:{},h="object"==typeof t&&t.separator||"-",f="object"==typeof t&&+t.truncate>1&&t.truncate||!1,m="object"==typeof t&&t.uric||!1,g="object"==typeof t&&t.uricNoSlash||!1,v="object"==typeof t&&t.mark||!1,b="object"==typeof t&&t.lang&&o[t.lang]?o[t.lang]:"object"!=typeof t||t.lang!==!1&&t.lang!==!0?o.en:{},$=[";","?",":","@","&","=","+","$",",","/"],w=[";","?",":","@","&","=","+","$",","],y=[".","!","~","*","'","(",")"],_="",C=h;if(u&&"number"==typeof u.length&&Array.prototype.toString.call(u)&&u.forEach(function(e){p[e+""]=e+""}),"string"!=typeof e)return"";for("string"==typeof t?h=t:"object"==typeof t&&(m&&(C+=$.join("")),g&&(C+=w.join("")),v&&(C+=y.join(""))),Object.keys(p).forEach(function(t){var i;i=t.length>1?new RegExp("\\b"+n(t)+"\\b","gi"):new RegExp(n(t),"gi"),e=e.replace(i,p[t])}),u&&(e=e.replace(/(\w)(\S*)/g,function(e,t,n){var i=t.toUpperCase()+(null!==n?n:"");return Object.keys(p).indexOf(i.toLowerCase())<0?i:i.toLowerCase()})),C=n(C),e=e.replace(/(^\s+|\s+$)/g,""),c=!1,s=0,l=e.length;l>s;s++)r=e[s],i[r]?(r=c&&i[r].match(/[A-Za-z0-9]/)?" "+i[r]:i[r],c=!1):!b[r]||m&&-1!==$.join("").indexOf(r)||g&&-1!==w.join("").indexOf(r)||v&&-1!==y.join("").indexOf(r)?(c&&(/[A-Za-z0-9]/.test(r)||_.substr(-1).match(/A-Za-z0-9]/))&&(r=" "+r),c=!1):(r=c||_.substr(-1).match(/[A-Za-z0-9]/)?h+b[r]:b[r],r+=void 0!==e[s+1]&&e[s+1].match(/[A-Za-z0-9]/)?h:"",c=!0),_+=r.replace(new RegExp("[^\\w\\s"+C+"_-]","g"),h);return _=_.replace(/\s+/g,h).replace(new RegExp("\\"+h+"+","g"),h).replace(new RegExp("(^\\"+h+"+|\\"+h+"+$)","g"),""),f&&_.length>f&&(a=_.charAt(f)===h,_=_.slice(0,f),a||(_=_.slice(0,_.lastIndexOf(h)))),d||u||u.length||(_=_.toLowerCase()),_},t=function(t){return function(n){return e(n,t)}},n=function(e){return e.replace(/[-\\^$*+?.()|[\]{}\/]/g,"\\$&")},i={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"Ae","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"Oe","Ő":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"Ue","Ű":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"ae","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"oe","ő":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"ue","ű":"u","ý":"y","þ":"th","ÿ":"y","ẞ":"SS","α":"a","β":"v","γ":"g","δ":"d","ε":"e","ζ":"z","η":"i","θ":"th","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"ks","ο":"o","π":"p","ρ":"r","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"o","ά":"a","έ":"e","ί":"i","ό":"o","ύ":"y","ή":"i","ώ":"o","ς":"s","ϊ":"i","ΰ":"y","ϋ":"y","ΐ":"i","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"I","Θ":"TH","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"KS","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ά":"A","Έ":"E","Ί":"I","Ό":"O","Ύ":"Y","Ή":"I","Ώ":"O","Ϊ":"I","Ϋ":"Y","ş":"s","Ş":"S","ı":"i","İ":"I","ğ":"g","Ğ":"G","Ќ":"Kj","ќ":"kj","Љ":"Lj","љ":"lj","Њ":"Nj","њ":"nj","Тс":"Ts","тс":"ts","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"yo","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ё":"Yo","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","Є":"Ye","І":"I","Ї":"Yi","Ґ":"G","є":"ye","і":"i","ї":"yi","ґ":"g","č":"c","ď":"d","ě":"e","ň":"n","ř":"r","š":"s","ť":"t","ů":"u","ž":"z","Č":"C","Ď":"D","Ě":"E","Ň":"N","Ř":"R","Š":"S","Ť":"T","Ů":"U","Ž":"Z","ą":"a","ć":"c","ę":"e","ł":"l","ń":"n","ś":"s","ź":"z","ż":"z","Ą":"A","Ć":"C","Ę":"E","Ł":"L","Ń":"N","Ś":"S","Ź":"Z","Ż":"Z","ā":"a","ē":"e","ģ":"g","ī":"i","ķ":"k","ļ":"l","ņ":"n","ū":"u","Ā":"A","Ē":"E","Ģ":"G","Ī":"I","Ķ":"k","Ļ":"L","Ņ":"N","Ū":"U","ا":"a","أ":"a","إ":"i","آ":"aa","ؤ":"u","ئ":"e","ء":"a","ب":"b","ت":"t","ث":"th","ج":"j","ح":"h","خ":"kh","د":"d","ذ":"th","ر":"r","ز":"z","س":"s","ش":"sh","ص":"s","ض":"dh","ط":"t","ظ":"z","ع":"a","غ":"gh","ف":"f","ق":"q","ك":"k","ل":"l","م":"m","ن":"n","ه":"h","و":"w","ي":"y","ى":"a","ة":"h","ﻻ":"la","ﻷ":"laa","ﻹ":"lai","ﻵ":"laa","َ":"a","ً":"an","ِ":"e","ٍ":"en","ُ":"u","ٌ":"on","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","“":'"',"”":'"',"‘":"'","’":"'","∂":"d","ƒ":"f","™":"(TM)","©":"(C)","œ":"oe","Œ":"OE","®":"(R)","†":"+","℠":"(SM)","…":"...","˚":"o","º":"o","ª":"a","•":"*",$:"USD","€":"EUR","₢":"BRN","₣":"FRF","£":"GBP","₤":"ITL","₦":"NGN","₧":"ESP","₩":"KRW","₪":"ILS","₫":"VND","₭":"LAK","₮":"MNT","₯":"GRD","₱":"ARS","₲":"PYG","₳":"ARA","₴":"UAH","₵":"GHS","¢":"cent","¥":"CNY","元":"CNY","円":"YEN","﷼":"IRR","₠":"EWE","฿":"THB","₨":"INR","₹":"INR","₰":"PF","đ":"d","Đ":"D","ẹ":"e","Ẹ":"E",
"ẽ":"e","Ẽ":"E","ế":"e","Ế":"E","ề":"e","Ề":"E","ệ":"e","Ệ":"E","ễ":"e","Ễ":"E","ọ":"o","Ọ":"o","ố":"o","Ố":"O","ồ":"o","Ồ":"O","ộ":"o","Ộ":"O","ỗ":"o","Ỗ":"O","ơ":"o","Ơ":"O","ớ":"o","Ớ":"O","ờ":"o","Ờ":"O","ợ":"o","Ợ":"O","ỡ":"o","Ỡ":"O","ị":"i","Ị":"I","ĩ":"i","Ĩ":"I","ụ":"u","Ụ":"U","ũ":"u","Ũ":"U","ư":"u","Ư":"U","ứ":"u","Ứ":"U","ừ":"u","Ừ":"U","ự":"u","Ự":"U","ữ":"u","Ữ":"U","ỳ":"y","Ỳ":"Y","ỵ":"y","Ỵ":"Y","ỹ":"y","Ỹ":"Y","ạ":"a","Ạ":"A","ấ":"a","Ấ":"A","ầ":"a","Ầ":"A","ậ":"a","Ậ":"A","ẫ":"a","Ẫ":"A","ă":"a","Ă":"A","ắ":"a","Ắ":"A","ằ":"a","Ằ":"A","ặ":"a","Ặ":"A","ẵ":"a","Ẵ":"A"},o={ar:{"∆":"delta","∞":"la-nihaya","♥":"hob","&":"wa","|":"aw","<":"aqal-men",">":"akbar-men","∑":"majmou","¤":"omla"},de:{"∆":"delta","∞":"unendlich","♥":"Liebe","&":"und","|":"oder","<":"kleiner als",">":"groesser als","∑":"Summe von","¤":"Waehrung"},nl:{"∆":"delta","∞":"oneindig","♥":"liefde","&":"en","|":"of","<":"kleiner dan",">":"groter dan","∑":"som","¤":"valuta"},en:{"∆":"delta","∞":"infinity","♥":"love","&":"and","|":"or","<":"less than",">":"greater than","∑":"sum","¤":"currency"},es:{"∆":"delta","∞":"infinito","♥":"amor","&":"y","|":"u","<":"menos que",">":"mas que","∑":"suma de los","¤":"moneda"},fr:{"∆":"delta","∞":"infiniment","♥":"Amour","&":"et","|":"ou","<":"moins que",">":"superieure a","∑":"somme des","¤":"monnaie"},pt:{"∆":"delta","∞":"infinito","♥":"amor","&":"e","|":"ou","<":"menor que",">":"maior que","∑":"soma","¤":"moeda"},ru:{"∆":"delta","∞":"beskonechno","♥":"lubov","&":"i","|":"ili","<":"menshe",">":"bolshe","∑":"summa","¤":"valjuta"},vn:{"∆":"delta","∞":"vo cuc","♥":"yeu","&":"va","|":"hoac","<":"nho hon",">":"lon hon","∑":"tong","¤":"tien te"}};if("undefined"!=typeof module&&module.exports)module.exports=e,module.exports.createSlug=t;else if("undefined"!=typeof define&&define.amd)define([],function(){return e});else try{if(window.getSlug||window.createSlug)throw"speakingurl: globals exists /(getSlug|createSlug)/";window.getSlug=e,window.createSlug=t}catch(a){}}(),$.validator&&$.validator.setDefaults({highlight:function(e){return $(e).closest(".form-group").addClass("has-error")},unhighlight:function(e){return $(e).closest(".form-group").removeClass("has-error").find("help-block-hidden").removeClass("help-block-hidden").addClass("help-block").show()},errorElement:"div",errorClass:"jquery-validate-error",errorPlacement:function(e,t){var n,i,o;return o=t.is('input[type="checkbox"]')||t.is('input[type="radio"]'),i=t.closest(".form-group").find(".jquery-validate-error").length,o&&i?void 0:(i||t.closest(".form-group").find(".help-block").removeClass("help-block").addClass("help-block-hidden").hide(),e.addClass("help-block"),o?t.closest('[class*="col-"]').append(e):(n=t.parent(),n.is(".input-group")?n.parent().append(e):n.append(e)))}})}.call(this),function(){var e;e=function(t,n){return null==n&&(n={}),this.options=$.extend({},e.DEFAULTS,n||{}),this.$input=t,this.$el=$('<div class="pixel-file-input"><span class="pfi-filename"></span><div class="pfi-actions"></div></div>').insertAfter(t).append(t),this.$filename=$(".pfi-filename",this.$el),this.$clear_btn=$(this.options.clear_btn_tmpl).addClass("pfi-clear").appendTo($(".pfi-actions",this.$el)),this.$choose_btn=$(this.options.choose_btn_tmpl).addClass("pfi-choose").appendTo($(".pfi-actions",this.$el)),this.onChange(),t.on("change",function(e){return function(){return $.proxy(e.onChange,e)()}}(this)).on("click",function(e){return e.stopPropagation()}),this.$el.on("click",function(){return t.click()}),this.$choose_btn.on("click",function(e){return e.preventDefault()}),this.$clear_btn.on("click",function(e){return function(n){return t.wrap("<form>").parent("form").trigger("reset"),t.unwrap(),$.proxy(e.onChange,e)(),n.stopPropagation(),n.preventDefault()}}(this))},e.DEFAULTS={choose_btn_tmpl:'<a href="#" class="btn btn-xs btn-primary">Choose</a>',clear_btn_tmpl:'<a href="#" class="btn btn-xs"><i class="fa fa-times"></i> Clear</a>',placeholder:null},e.prototype.onChange=function(){var e;return e=this.$input.val().replace(/\\/g,"/"),""!==e?(this.$clear_btn.css("display","inline-block"),this.$filename.removeClass("pfi-placeholder"),this.$filename.text(e.split("/").pop())):(this.$clear_btn.css("display","none"),this.options.placeholder?(this.$filename.addClass("pfi-placeholder"),this.$filename.text(this.options.placeholder)):this.$filename.text(""))},$.fn.FileInput=function(t){return this.each(function(){return $.data(this,"FileInput")?void 0:$.data(this,"FileInput",new e($(this),t))})},$.fn.FileInput.Constructor=e}.call(this),function(){var e;e=function(t,n){return null==n&&(n={}),this.options=$.extend({},e.DEFAULTS,n||{}),this.$container=t,this.$target=this.options.target&&this.$container.find(this.options.target).length?this.$container.find(this.options.target):null,this.$content=this.options.hidden_content&&this.$container.find(this.options.hidden_content).length?this.$container.find(this.options.hidden_content):null,this.$container.addClass("expanding-input"),this.$target&&(this.$target.addClass("expanding-input-target"),this.$target.hasClass("input-sm")&&this.$container.addClass("expanding-input-sm"),this.$target.hasClass("input-lg")&&this.$container.addClass("expanding-input-lg")),this.$content&&this.$content.addClass("expanding-input-content"),this.$overlay=$('<div class="expanding-input-overlay"></div>').appendTo(this.$container),this.$target&&this.$target.attr("placeholder")&&(this.options.placeholder||(this.options.placeholder=this.$target.attr("placeholder")),this.$target.attr("placeholder","")),this.options.placeholder&&this.$overlay.append($('<div class="expanding-input-placeholder"></div>').html(this.options.placeholder)),this.$target&&this.$target.on("focus",$.proxy(this.expand,this)),this.$overlay.on("click.expanding_input",$.proxy(this.expand,this))},e.prototype.expand=function(){return this.$container.hasClass("expanded")?void 0:(this.options.onBeforeExpand&&this.options.onBeforeExpand.call(this),this.$overlay.remove(),this.$container.addClass("expanded"),this.$target&&setTimeout(function(e){return function(){return e.$target.focus()}}(this),1),this.$target&&this.options.placeholder&&this.$target.attr("placeholder",$("<div>"+this.options.placeholder+"</div>").text()),this.options.onAfterExpand?this.options.onAfterExpand.call(this):void 0)},e.DEFAULTS={target:null,hidden_content:null,placeholder:null,onBeforeExpand:null,onAfterExpand:null},$.fn.expandingInput=function(t){return this.each(function(){var n;return n=$(this),n.attr("data-expandingInput")?void 0:$.data(n,"expandingInput",new e(n,t))})},$.fn.expandingInput.Constructor=e}.call(this);var CMS={models:{},views:{},collections:{},routes:{},settings:{},translations:{},plugins:{},popup_target:null,content_height:null,calculateContentHeight:function(){if(null!=this.content_height)return this.content_height;var e=$("#content-wrapper"),t=$("#main-navbar"),n=($("footer"),$(window)),i=n.outerHeight()-t.outerHeight(),o=e.outerHeight(!$("body").hasClass("iframe"))-e.innerHeight()+$("body").hasClass("iframe")?0:140;return this.content_height=i-o,this.content_height}};CMS.messages={init:function(){"undefined"!=typeof MESSAGE_ERRORS&&(this.parse(MESSAGE_ERRORS,"error"),this.parse(MESSAGE_SUCCESS),$("body").on("show_message",$.proxy(function(){var e=_.toArray(arguments).slice(1);this.parse(e)},this)))},parse:function(e,t){for(text in e)"_external"!=text?("error"==t&&CMS.error_field(text,decodeURIComponent(e[text])),this.show(e[text],t)):this.parse(e[text],t)},show:function(e,t,n){t||(t="success"),window.top.noty({layout:"topRight",type:t,icon:n||"fa fa-ok",text:decodeURIComponent(e)})},error:function(e){this.show(e,"error")}},CMS.error_field=function(e,t){var n=$(".form-group:not(.has-error)");if("object"==typeof e)var i=e;else{e=-1!==e.indexOf(".")?"["+e.replace(/\./g,"][")+"]":e;var i=$(':input[name*="'+e+'"]',n)}i.after('<span class="help-block error-message">'+t+"</span>").closest(".form-group").addClass("has-error");var o=i.closest(".tab-pane").prop("id");if(o){var a=$('.nav-tabs a[href="#'+o+'"]').addClass("tab-error");a.closest(".tabdrop").find(".dropdown-toggle").addClass("tab-error")}},CMS.clear_error=function(e,t){var n=$(".form-group");"object"==typeof e&&(n=$(".form-group",e)),n.removeClass("has-error").find(".error-message").remove(),t!==!1&&$(".nav-tabs li a").removeClass("tab-error")},CMS.filters={filters:[],switchedOn:{},editors:{},add:function(e,t,n,i){return void 0==t||void 0==n?void CMS.messages.error("System try to add filter without required callbacks.",e,t,n):void this.filters.push([e,t,n,i])},switchOn:function(e,t,n){if($("#"+e).css("display","block"),this.filters.length>0){for(var i=this.get(e),o=null,a=0;a<this.filters.length;a++)if(this.filters[a][0]==t){o=this.filters[a];break}i!==o&&this.switchOff(e);try{this.switchedOn[e]=o,this.editors[e]=o[1](e,n),$("#"+e).trigger("filter:switch:on",this.editors[e])}catch(s){}}},switchOff:function(e){var t=this.get(e);try{t&&"function"==typeof t[2]&&t[2](this.editors[e],e),this.switchedOn[e]=null,$("#"+e).trigger("filter:switch:off")}catch(n){}},get:function(e){for(var t in this.switchedOn)if(t==e)return this.switchedOn[t];return null},exec:function(e,t,n){var i=this.get(e);return i&&"function"==typeof i[3]?i[3](this.editors[e],t,e,n):!1}},CMS.loader={counter:0,getLastId:function(){return this.counter},init:function(e,t){void 0===e||e instanceof jQuery?void 0===e&&(e=$("body")):e=$(e),++this.counter;var n=$('<div class="_loader_container"><span class="_loader_preloader" /></div>');return void 0!==t&&n.append(t instanceof jQuery?t:'<span class="_loader_message">'+t+"</span>"),n.appendTo(e).css({width:e.outerWidth(!0),height:e.outerHeight(!0),top:e.offset().top-$(window).scrollTop(),left:e.offset().left-$(window).scrollLeft()}).prop("id","loader"+this.getLastId())},show:function(e,t,n){var n=n||500;return this.init(e,t).fadeTo(n,.7),this.counter},hide:function(e){cont=$(e?"#loader"+e:"._loader_container"),cont.stop().fadeOut(400,function(){$(this).remove()})}},CMS.Notifications={list:{},showed:[],container:"#notifications-container",emptyMessageShowed:!1,scrollInited:!1,init:function(){this.fetchList()},create:function(e){var t=this.list.length&&_.find(this.list,function(t){return t.id==e.id});!t&&this.list.push(this.prepareData(e))},show:function(e){var t=this.getContainer();this.notificationIsShowed(e.id)||(this.fetchNotification(this.prepareData(e)).prependTo(t),this.showed.push(e.id),this.updateCounter())},prepareData:function(e){return e.date=moment(e.date),e.color=e.color||"default",e.type=e.type||"Info",e},read:function(e){var t=this;Api["delete"]("/api.notification.read",{id:e},function(){t.deleteNotifiction(e)})},updateCounter:function(){this.getTotal()>0?(this.emptyMessageShowed&&this.removeEmptyMessage(),!this.scrollInited&&this.getContainer().slimScroll({height:250})):(this.emptyMessageShowed||this.showEmptyMessage(),this.scrollInited&&this.getContainer().slimScroll({destroy:!0})),$(".counter",this.container).text(this.getTotal())},showEmptyMessage:function(){this.emptyMessageShowed=!0,this.getContainer().append($('<div class="popover-content bg-info">'+i18n.t("notifications.core.no_unread_messages")+"</div>"))},removeEmptyMessage:function(){this.emptyMessageShowed=!1,this.getContainer().find(".popover-content").remove()},getTotal:function(){return this.showed.length},getContainer:function(){return $(".notifications-list",this.container)},fetchList:function(){this.list=_.sortBy(this.list,function(e){return!e.date.unix()});for(i in this.list)this.show(this.list[i]);this.updateCounter()},deleteNotifiction:function(e){this.list=_.filter(this.list,function(t){return t.id!=e}),this.showed=_.filter(this.showed,function(t){return t==e}),this.updateCounter()},fetchNotification:function(e){var t=$('<div class="notification" />'),n=this;return e.id&&t.data("id",e.id).on("click",function(e){n.read($(this).data("id")),$(this).remove(),e.preventDefault()}),e.type&&$('<div class="notification-title text-'+e.color+'" />').text(e.type.toUpperCase()).appendTo(t),e.message&&$('<div class="notification-description" />').html(e.message).appendTo(t),e.date&&$('<div class="notification-ago margin-xs-vr" />').html(e.date.fromNow()).appendTo(t),e.icon&&$('<div class="notification-icon fa fa-'+e.icon+" bg-"+e.color+'" />').appendTo(t),t},notificationIsShowed:function(e){return this.showed.length&&void 0!==_.find(this.showed,function(t){return t==e})}},CMS.filemanager={open:function(e,t){return Popup.openIframe(BASE_URL+"/filemanager.popup",{onComplete:function(t){$("#cboxLoadedContent iframe").load(function(){this.contentWindow.elfinderInit({getFileCallback:function(t){_.isObject(t)&&(t=t.url),_.isObject(e)?(e.val(t),Popup.close()):window.top.CMS.filters.exec(e,"insert",t)&&Popup.close()}})})}})}},CMS.controllers={_controllers:[],add:function(e,t){if("function"!=typeof t)return this;if("object"==typeof e)for(var n=0;n<e.length;n++)this._controllers.push([e[n],t]);else"string"==typeof e&&this._controllers.push([e,t]);return this},call:function(){$("body").trigger("controller.call.before");for(var e=$("body:first").attr("id"),t=0;t<this._controllers.length;t++)e=="body."+this._controllers[t][0]&&this._controllers[t][1](this._controllers[t][0]);$("body").trigger("controller.call.after")}},CMS.ui={_elements:[],add:function(e,t,n){return"function"!=typeof t?this:(CMS.ui._elements.push([e,t,n||0]),this)},call:function(e){for(var t=0;t<CMS.ui._elements.length;t++){var n=CMS.ui._elements[t];_.isArray(e)&&-1!=_.indexOf(e,n[0])?n[1]():e==n[0]&&n[1]()}},init:function(e){$("body").trigger("ui.init.before",[this]),CMS.ui._elements=_.sortBy(CMS.ui._elements,2);for(var t=0;t<CMS.ui._elements.length;t++){var n=CMS.ui._elements[t];try{e?_.isArray(e)&&-1!=_.indexOf(e,n[0])?n[1]():e==n[0]&&n[1]():n[1]()}catch(i){console.log(n[0],i)}}$("body").trigger("ui.init.after",[this])}},function(e){var t={settings:{updateOnResize:!1,contentHeight:!1,type:"height",offset:0,minHeight:0,onCalculate:function(e,t){e.css(this.type,t)},onResize:function(e,n){e.css(t.settings.type,n)}},children:function(n,i,o){return n.children().each(function(){var n=e(this);i.is(n)||n.is(":hidden")||(n.find(i).size()>0?(o-=n.outerHeight(!0)-n.outerHeight(),o=t.children(n,i,o)):o-=n.outerHeight(!0))}),o},get_calculated_height:function(e,n){var i=this.get_content_height(e);return i=this.children(e,n,i),i-=parseInt(t.settings.offset),i<t.settings.minHeight&&(i=t.settings.minHeight),i},get_content_height:function(e){var t=0;return t=this.settings.contentHeight?"boolean"==typeof this.settings.contentHeight||"auto"==this.settings.contentHeight?CMS.calculateContentHeight():parseInt(this.settings.contentHeight):e.height(),t-3},get_taget_object:function(t,n){return"string"==typeof t||t instanceof String?e(t,n):$target_object instanceof jQuery?t:!1}};e.fn.calcHeightFor=function(n,i){t.settings=e.extend(t.settings,i);var o=e(this);if($target_object=t.get_taget_object(n,this),$target_object&&0!=o.find($target_object).size()){var a=t.get_content_height(o);return a=t.children(e(this),$target_object,a)}},e.fn.setHeightFor=function(n,i){return t.settings=e.extend(t.settings,i),this.each(function(){var i=e(this);if($target_object=t.get_taget_object(n,this),$target_object&&0!=i.find($target_object).size()){var o=$target_object.size();$target_object.each(function(){var n=e(this),a=t.get_calculated_height(i,n)/o;t.settings.onCalculate(n,a),t.settings.updateOnResize&&e(window).on("resize",i,function(){var e=t.get_calculated_height(i,n)/o;t.settings.onResize(n,e)})})}})}}(jQuery),function(){"use strict";var e="undefined"!=typeof module&&module.exports,t="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,n=function(){for(var e,t,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],i=0,o=n.length,a={};o>i;i++)if(e=n[i],e&&e[1]in document){for(i=0,t=e.length;t>i;i++)a[n[0][i]]=e[i];return a}return!1}(),i={elem:!1,request:function(e){var i=n.requestFullscreen;this.elem=e||document.documentElement,/5\.1[\.\d]* Safari/.test(navigator.userAgent)?this.elem[i]():this.elem[i](t&&Element.ALLOW_KEYBOARD_INPUT),this.elem&&$(this.elem).addClass("kodicms-fullscreen")},exit:function(){document[n.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},raw:n};return document.addEventListener(i.raw.fullscreenchange,function(){i.isFullscreen||i.elem&&$(i.elem).removeClass("kodicms-fullscreen")&&(i.elem=!1)}),n?(Object.defineProperties(i,{isFullscreen:{get:function(){return!!document[n.fullscreenElement]}},element:{enumerable:!0,get:function(){return document[n.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!document[n.fullscreenEnabled]}}}),void(e?module.exports=i:window.FullScreen=i)):void(e?module.exports=!1:window.FullScreen=!1)}(),CMS.ui.add("flags",function(){$("body").on("click",".flags .label",function(e){var t=$(this).parent().data("target");t=t?$(t):$(this).parent().prevAll(":input");var n=$(this).parent(),o=1==n.data("append"),a=1==n.data("array"),s=$(this).data("value");if(a&&(s=s.split(",")),o){if(t.is(":input")){var r=t.val().split(", ");r.push(s),r=_.uniq(_.compact(r)),t.val(r.join(", "))}else{var r=t.text().split(", ");r.push(s),r=_.uniq(_.compact(r)),t.text(r.join(", "))}$(".label",n).removeClass("label-success");for(i in r)$('.label[data-value="'+r[i]+'"]').addClass("label-success")}else $(".label",n).removeClass("label-success"),$(this).addClass("label-success"),t.hasClass("select2-offscreen")?t.select2("val",s):t.is(":input")?t.val(s):t.text(s);t.change(),e.preventDefault()})}).add("btn-confirm",function(){$("body").on("click",".btn-confirm",function(e){var t=$(this),n=i18n.t("cms.core.messages.are_you_sure");return t.data("message")&&(n=t.data("message")),confirm(n)})}).add("calculate_height",function(){CMS.calculateContentHeight(),$(window).resize(function(){CMS.content_height=null,CMS.calculateContentHeight()})}).add("panel-toggler",function(){var e="fa-chevron-up",t="fa-chevron-down",n=i18n.t("cms.core.label.toggler_close");$(".panel-toggler").click(function(){var n=$(this),i=n.data("hash");if(n.data("target"))o=$(n.data("target"));else var o=n.next(".panel-spoiler");return o.slideToggle("fast",function(){var o=n.find(".panel-toggler-icon"),a=n.find(".panel-toggler-text");$(this).is(":hidden")?(o.removeClass(e).addClass(t).addClass("fa"),a.text(i18n.t("cms.core.label.toggler_close")),i&&CMS.hashString.removeParam("toggled",i)):(o.addClass(e).removeClass(t).addClass("fa"),a.text(i18n.t("cms.core.label.toggler_open")),i&&CMS.hashString.setParam("toggled[]",i))}),!1}).each(function(){var e=$(this),t=e.data("hash");CMS.hashString.findInParam("toggled",t)&&e.click()}).append('<div class="panel-heading-controls"><span class="text-sm"><i class="panel-toggler-icon fa '+t+'" />&nbsp;&nbsp;&nbsp;<span class="panel-toggler-text">'+n+"</span></span></div>")}).add("datepicker",function(){var e={format:"Y-m-d H:i:00",lang:LOCALE,dayOfWeekStart:1};$(".datetimepicker").each(function(){var t=$.extend({},e),n=$(this);n.data("range-max-input")&&(t.onShow=function(e){var t=$(n.data("range-max-input"));this.setOptions({maxDate:t.val()?t.val():!1})}),n.data("range-min-input")&&(t.onShow=function(e){var t=$(n.data("range-min-input"));this.setOptions({minDate:t.val()?t.val():!1})}),n.datetimepicker(t)}),$(".datepicker").each(function(){var t=$.extend(e,{timepicker:!1,format:"Y-m-d"}),n=$(this);n.data("range-max-input")?t.onShow=function(e){var t=$(n.data("range-max-input"));this.setOptions({maxDate:t.val()?t.val():!1})}:n.data("range-min-input")&&(t.onShow=function(e){var t=$(n.data("range-min-input"));this.setOptions({minDate:t.val()?t.val():!1})}),n.datetimepicker(t)}),$(".timepicker").each(function(){var t=$.extend(e,{timepicker:!0,datepicker:!1,format:"H:i:s"}),n=$(this);n.datetimepicker(t)})}).add("slug",function(){var e={};$("body").on("keyup",".slug-generator",function(){var t=$(".slugify");if($(this).data("slug")&&(t=$($(this).data("slug"))),$separator="-",$(this).data("separator")&&($separator=$(this).data("separator")),t.is(":input")&&""==t.val()&&(e[t]=!0),t.on("keyup",function(){e[t]=!1}),e[t]){var n=getSlug($(this).val(),{separator:$separator});t.is(":input")?t.val(n):t.text(n)}}),$("body").on("keyup",".slugify",function(){var t=String.fromCharCode(event.keyCode),n=t.match(/\w/);if(n||"32"==event.keyCode){$separator="-",$(this).data("separator")&&($separator=$(this).data("separator"));var i=getSlug($(this).val(),{separator:$separator});$(this).val(i),e[$(this)]=!1,""==$(this).val()&&(e[$(this)]=!0)}})}).add("dropzone",function(){Dropzone.autoDiscover=!1,$(".dropzone").length&&(CMS.uploader=new Dropzone(".dropzone",{success:function(e,t){var n=$.parseJSON(t),i=this;200!=n.code?CMS.messages.error(n.message):n.message&&CMS.messages.show(n.message),$(e.previewElement).fadeOut(500,function(){i.removeFile(e)})},error:function(e,t){CMS.messages.error(t),this.removeFile(e)},dictDefaultMessage:__("Drop files here to upload"),dictFallbackMessage:__("Your browser does not support drag'n'drop file uploads."),dictFallbackText:__("Please use the fallback form below to upload your files like in the olden days."),dictFileTooBig:__("File is too big ({{filesize}}MB). Max filesize: {{maxFilesize}}MB."),dictInvalidFileType:__("You can't upload files of this type."),dictResponseError:__("Server responded with {{statusCode}} code."),dictCancelUpload:__("Cancel upload"),dictCancelUploadConfirmation:__("Are you sure you want to cancel this upload?"),dictRemoveFile:__("Remove file"),dictMaxFilesExceeded:__("You can only upload {{maxFiles}} files.")}))}).add("select2",function(){$.extend($.fn.select2.defaults.defaults,{theme:"bootstrap",width:"style"}),$("select").not(".no-script").select2(),$(".tags").select2({tags:!0,tokenSeparators:[","," ",";"]})}).add("filemanager",function(){var e=$(":input[data-filemanager]");e.each(function(){var e=$(this),t=$('<button class="btn btn-info btn-labeled" type="button"><i class="fa fa-folder-open"></i></button>');e.next().hasClass("input-group-btn")?t.prependTo(e.next()):t.insertAfter(e),t.on("click",function(){CMS.filemanager.open(e)}),e.removeAttr("data-filemanager")}),$("body").on("click",".btn-filemanager",function(){var e=$(this).data("el"),t=$(this).data("type");return e?(CMS.filemanager.open(e,t),!1):!1})}).add("hotkeys",function(){$("*[data-hotkeys]").each(function(){var e=$(this),t=e.data("hotkeys"),n=function(e){e.preventDefault()};e.is(":submit")||e.hasClass("popup")?n=function(t){e.trigger("click"),t.preventDefault()}:e.attr("href")?n=function(t){return e.hasClass("btn-confirm")&&!confirm(__("Are you sure?"))?!1:(window.location=e.attr("href"),void t.preventDefault())}:e.hasClass("panel-toggler")?n=function(t){e.trigger("click"),$("body").scrollTo(e),t.preventDefault()}:e.hasClass("nav-tabs")?n=function(t){var n=e.find("li.active"),i=n.next();i.hasClass("nav-section")&&(i=i.next()),n.is(":last-child")&&(i=e.parent().find("li:first-child")),i.find("a").trigger("click"),t.preventDefault()}:e.is(":checkbox")&&(n=function(t){e.prop("checked")?e.uncheck().trigger("change"):e.check().trigger("change"),t.preventDefault()}),$(document).on("keydown",null,t,n)}),$(document).on("keydown",null,"shift+f1",function(e){Api["delete"]("/api.cache.clear"),e.preventDefault()}),$(document).on("keydown",null,"shift+f2",function(e){Api.get("/api.layout.rebuild"),e.preventDefault()}),$(document).on("keydown",null,"ctrl+shift+l",function(e){window.location="/backend/auth/logout",e.preventDefault()})}).add("select_all_checkbox",function(){$(document).on("change",'input[name="check_all"]',function(e){var t=$(this),n=t.data("target");return n?($(n).prop("checked",this.checked).trigger("change"),void e.preventDefault()):!1})}).add("icon",function(){$("*[data-icon]").add("*[data-icon-prepend]").each(function(){var e=$(this).data("icon");$(this).hasClass("btn-labeled")&&(e+=" btn-label icon"),$(this).html('<i class="fa fa-'+e+'"></i> '+$(this).html()),$(this).removeAttr("data-icon-prepend").removeAttr("data-icon")}),$("*[data-icon-append]").each(function(){$(this).html($(this).html()+'&nbsp&nbsp<i class="fa fa-'+$(this).data("icon-append")+'"></i>'),$(this).removeAttr("data-icon-append")})}).add("tabbable",function(){$(".tabbable").each(function(e){var t=$(this);if($("> .panel-heading",t).size()>0){var n=$('<div class="tab-content no-padding-t no-padding-b" />').prependTo(t),i=$('<ul class="nav nav-tabs tabs-generated" />');$("> .panel-heading",t).each(function(t){var o=$("<li></li>").appendTo(i),a=$(this).nextUntil(".panel-heading").not(".panel-footer").removeClass("panel-spoiler");$(this).find(".panel-title").removeClass("panel-title"),$(this).find(".panel-heading-controls").remove(),$('<div class="tab-pane" id="panel-tab-'+e+t+'" />').append(a).appendTo(n),$('<a href="#panel-tab-'+e+t+'" data-toggle="tab"></a>').html($(this).html()).appendTo(o),$(this).remove()}),i.prependTo(t)}}),$(".tabs-generated li:first-child").add(".tabbable .tab-pane:first-child").addClass("active"),$(".tabs-generated").tabdrop()}).add("noty",function(){$.noty.themes.KodiCMSTheme=$.extend($.noty.themes.bootstrapTheme,{name:"KodiCMSTheme",style:function(){var e=this.options.layout.container.selector;switch($(e).addClass("list-group"),this.$closeButton.append('<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>'),this.$closeButton.addClass("close"),this.$bar.addClass("alert alert-dark").css("padding","10px"),this.options.type){case"alert":case"notification":case"information":this.$bar.addClass("alert-info");break;case"warning":this.$bar.addClass("alert-warning");break;case"error":this.$bar.addClass("alert-danger");break;case"success":this.$bar.addClass("alert-success")}this.$message.css({position:"relative"})}}),$.noty.defaults=$.extend($.noty.defaults,{layout:"topRight",theme:"KodiCMSTheme",timeout:3e3})}).add("momentJs",function(){moment.locale(LOCALE)}).add("switcher",function(){$(".form-switcher").bootstrapToggle()}).add("bootbox",function(){bootbox.setLocale(LOCALE)}).add("bootstrap",function(){$('[data-toggle="tooltip"]').tooltip(),$('[data-toggle="popover"]').popover()}),CMS.hashString={query:null,_init:function(){this._loadHashParams(),$(window).on("hashchange",$.proxy(function(){this._loadHashParams()},this))},getParam:function(e){return _.isNull(this.query)?null:this.query.get(e)},setParam:function(e,t){if(_.isArray(t))for(i in t)this.setParam(e+"[]",t[i]);else if(_.isObject(t))for(i in t)this.setParam(e+"["+i+"]",t[i]);else this.findInParam(e,t)||this.query.SET(e,t);this._updateHash()},removeParam:function(e,t){this.query.REMOVE(e,t),this._updateHash()},findInParam:function(e,t){var n=this.getParam(e.replace(/\[.*?\]/g,""));return _.isNull(n)?!1:_.isArray(n)?_.indexOf(n,t)>=0:n==t},_updateHash:function(){var e=this.query.toString().substring(1);e.length>0?window.location.hash=this.query.toString().substring(1):history.pushState("",document.title,window.location.pathname+window.location.search)},_loadHashParams:function(){this.query=$.query.parseNew("?"+window.location.hash.substring(1))}},CMS.ui.add("location.hash",function(){CMS.hashString._init()},-999);var Popup={_target:null,_defaults:{fixed:!0,width:"95%",height:"93%",maxWidth:"95%",maxHeight:"93%",transition:"fade",opacity:.4,speed:100,close:'<i class="fa fa-times fa-fw" />',onLoad:function(e,t){Popup._target=e}},_resizeTimer:null,defaults:function(){return this._defaults},openHTML:function(e,t,n){if(!t)var t={};if(e instanceof jQuery)var i={inline:!0,href:e};else var i={html:e};return this.get($.extend(t,i),n)},openIframe:function(e,t,n){if(!t)var t={};return this.openUrl(e,$.extend(t,{iframe:!0}),n)},openUrl:function(e,t,n){if(!t)var t={};var i=e.split("?")[0],o=$.query.load(e).set("type","iframe").toString();return e=i+o,this.get($.extend(t,{href:e}),n)},close:function(){window.top.$.colorbox.close()},get:function(e,t){$(window).resize(this.resize);var e=$.extend({},this.defaults(),e);return t?window.top.$.colorbox(e):$.colorbox(e)},resize:function(){this._resizeTimer&&clearTimeout(this._resizeTimer),this._resizeTimer=setTimeout(function(){$.colorbox.resize({width:"95%",height:"93%",speed:100})},500)}};CMS.ui.add("popup",function(){$("body").on("click",".popup",function(e){e.preventDefault();var t=$(this).data("popup-type"),n=$(this).data("popup-params"),i=$(this).data("popup-parent");switch(t){case"html":return Popup.openHTML($(this),n,i);case"url":case"href":case"ajax":return Popup.openUrl($(this).prop("href"),n,i);default:return Popup.openIframe($(this).prop("href"),n,i)}});var e=$("form"),t=$(".iframe .form-actions").add(".form-popup"),n=e.data("api-method"),i=e.data("api-url");n&&n.length>0&&i&&i.length>0&&($(".btn-save",t).on("click",function(t){Api[n](i,e),t.preventDefault()}),$(".btn-save-close",t).on("click",function(t){Api[n](i,e,function(e){200==e.code&&Popup.close()}),t.preventDefault()})),$(".btn-close",t).on("click",function(e){Popup.close(),e.preventDefault()})});var Scroll={add:function(e,t){$(e).slimScroll(t)},addToWidget:function(e,t,n){function o(){if(!e)var e=[".panel-heading",".panel-footer"];var t=s.innerHeight()-5;for(i in e)t-=s.find(e[i]).innerHeight();r.slimScroll({height:t})}function a(){r.slimScroll({destroy:!0}),o()}var s=$(e),r=$(t,s);s.on("resize_stop",function(e,t,n){a()}),o()}},Api={_response:null,get:function(e,t,n,i){return this.request("GET",e,t,n,i)},post:function(e,t,n,i){return this.request("POST",e,t,n,i)},put:function(e,t,n,i){return this.request("PUT",e,t,n,i)},"delete":function(e,t,n,i){return this.request("DELETE",e,t,n,i)},request:function(e,t,n,i,o){var a=this.parseUrl(t);return $.ajaxSetup({contentType:"application/json"}),n instanceof jQuery&&(n=Api.serializeObject(n)),"object"==typeof n&&"get"!=e.toLowerCase()&&(n=JSON.stringify(n)),$.ajax({type:e,url:a,data:n,dataType:"json",async:o!==!1}).done(function(t){if(this._response=t,200!=t.code)return Api.exception(t,i);t.message&&CMS.messages.show(t.message,"success","fa fa-exclamation-triangle");var n=e+a.replace(SITE_URL,":").replace(/\//g,":");window.top.$("body").trigger(n.toLowerCase(),[this._response]),"function"==typeof i&&i(this._response)}).fail(function(e){return Api.exception(e.responseJSON,i)})},parseUrl:function(e){return e},getEventKey:function(e,t){var n=e+t.replace(SITE_URL,":").replace(/\//g,":");return n.toLowerCase()},serializeObject:function(e){var t={},n={},i={validate:/^[a-zA-Z][a-zA-Z0-9_]*(?:\[(?:\d*|[a-zA-Z0-9_]+)\])*$/,key:/[a-zA-Z0-9_]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_]+$/},o=function(e,t,n){return e[t]=n,e},a=function(e){return void 0===n[e]&&(n[e]=0),n[e]++};return $.each(e.serializeArray(),function(){if(i.validate.test(this.name)){for(var e,n=this.name.match(i.key),s=this.value,r=this.name;void 0!==(e=n.pop());)r=r.replace(new RegExp("\\["+e+"\\]$"),""),e.match(i.push)?s=o([],a(r),s):e.match(i.fixed)?s=o([],e,s):e.match(i.named)&&(s=o({},e,s));t=$.extend(!0,t,s)}}),t},exception:function(e,t){switch("function"==typeof t&&t(e),e.code){case 220:break;case 110:CMS.messages.show(e.message,"error","fa fa-exclamation-triangle");for(i in e.fields)CMS.error_field(e.fields[i],"Required");break;case 120:for(i in e.errors)CMS.messages.show(e.errors[i],"error","fa fa-exclamation-triangle"),CMS.error_field(i,e.errors[i].join(", "));break;case 130:case 140:case 150:break;case 301:case 302:if("iframe"==REQUEST_TYPE){var n=e.targetUrl.indexOf("?");

e.targetUrl+=-1!=n?"&type=iframe":"?type=iframe"}window.location.href=e.targetUrl;break;case 403:case 404:}},response:function(){return this._response}};CMS.ui.add("api_buttons",function(){$(".btn[data-api-url]").on("click",function(e){e.preventDefault();var t=$(this),n=function(e){},i=t.data("api-url");if(i){var n=t.data("callback");n=n?window[n]:function(e){};var o=t.data("method"),a=t.data("reload"),s=t.data("params"),r=t.data("preloader");if(a&&(n=a===!0?function(){window.location=""}:function(){window.location=a}),o||(o="GET"),r){var l="string"==typeof r?r:"body",c=CMS.loader.show(l);$(window).on(Api.getEventKey(o,Api.parseUrl(i)),function(e){CMS.loader.hide(c)})}Api.request(o,i,s,n)}})}).add("ajax_form",function(){$("body").on("submit","form.form-ajax",function(){var e=$(this),t=$("button",e).attr("disabled","disabled"),n=e.attr("action");e.data("ajax-action")&&(n=e.data("ajax-action"));var i=CMS.loader.show($(this));return Api.post(n,e,function(e){setTimeout(function(){t.removeAttr("disabled"),CMS.loader.hide(i)},1e3)}),!1})});var UserMeta={_url:"/api.user.meta",get:function(e,t){Api.get(this._url,{key:e},t)},add:function(e,t,n){Api.post(this._url,{key:e,value:t},n)},update:function(e,t,n){Api.put(this._url,{key:e,value:t},n)},"delete":function(e,t){Api["delete"](this._url,{key:e,value:data},t)}};$(function(){function e(){CMS.ui.init(),KodiCMS.start(null,CMS.settings),CMS.controllers.call(),CMS.messages.init(),CMS.Notifications.init()}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});try{i18n.init({lng:LOCALE,fallbackLng:"ru",useLocalStorage:!0,interpolationPrefix:":",interpolationSuffix:"",localStorageExpirationTime:864e5,resGetPath:"/cms/js/locale/:lng.json"},e)}catch(t){e()}});